import socket
import sys
import subprocess
import datetime

def scan_port(ip):
    try:
        for port in range(1,1025):  
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            result = sock.connect_ex((ip, port))
            if result == 0:
                print (f'Port {port} : Open')
                sock.close()
    except:
        print ("Couldn't connect to server")


#Clears the screen
subprocess.call('clear', shell=True)

#User input for an IP
serverIp = input("Enter IP to scan: ")
if serverIp == '':
    print('No value entered')
    sys.exit(0)

#Banner
print (f'Please wait, scanning remote host {serverIp} from port 1 - 1025')

#gets the time before and after calling the scan_port function
t1 = datetime.datetime.now()
scan_port(serverIp)
t2 = datetime.datetime.now()

#Difference of the time
total =  t2 - t1

print (f'Scanning Completed in: {total}')
